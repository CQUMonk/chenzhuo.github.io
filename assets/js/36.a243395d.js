(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{220:function(e,a,t){"use strict";t.r(a);var s=t(0),o=Object(s.a)({},(function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h1",{attrs:{id:"websettings基本配置"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#websettings基本配置","aria-hidden":"true"}},[e._v("#")]),e._v(" WebSettings基本配置")]),e._v(" "),t("p",[e._v("通过Android webview所提供的"),t("code",[e._v("WebSettings")]),e._v("对象，开发者可以根据业务需求对webview进行一系列的基本配置：")]),e._v(" "),t("div",{staticClass:"language-java extra-class"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("WebSettings")]),e._v(" webSetting"),t("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v("mWebview"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[e._v("getSettings")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),t("p",[e._v("开发者需要根据自身业务在Webview的创建和初始化过程中对一些基本属性和参数进行配置:")]),e._v(" "),t("h4",{attrs:{id:"setsupportzoom-boolean-support"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setsupportzoom-boolean-support","aria-hidden":"true"}},[e._v("#")]),e._v(" setSupportZoom(boolean support)")]),e._v(" "),t("blockquote",[t("p",[e._v("设置Webview是否支持屏幕上的缩放工具和手势控制来进行页面缩放控制，默认为true")])]),e._v(" "),t("h4",{attrs:{id:"setdisplayzoomcontrols-boolean-enabled"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setdisplayzoomcontrols-boolean-enabled","aria-hidden":"true"}},[e._v("#")]),e._v(" setDisplayZoomControls(boolean enabled)")]),e._v(" "),t("blockquote",[t("p",[e._v("是否展示缩放工具，默认为 true")])]),e._v(" "),t("h4",{attrs:{id:"setbuiltinzoomcontrols-boolean-enabled"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setbuiltinzoomcontrols-boolean-enabled","aria-hidden":"true"}},[e._v("#")]),e._v(" setBuiltInZoomControls (boolean enabled)")]),e._v(" "),t("blockquote",[t("p",[e._v("设置Webview是否使用自身的缩放机制，默认为false")])]),e._v(" "),t("h4",{attrs:{id:"setusewideviewport-boolean-use"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setusewideviewport-boolean-use","aria-hidden":"true"}},[e._v("#")]),e._v(" setUseWideViewPort (boolean use)")]),e._v(" "),t("blockquote",[t("p",[e._v("设置是否支持"),t("code",[e._v("<meta>")]),e._v("标签中对viewport的设置，默认值为false；")])]),e._v(" "),t("h4",{attrs:{id:"setcachemode-int-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setcachemode-int-mode","aria-hidden":"true"}},[e._v("#")]),e._v(" setCacheMode(int mode)")]),e._v(" "),t("blockquote",[t("p",[e._v("WebView页面数据的缓存模式")])]),e._v(" "),t("p",[e._v("正常页面加载会加载缓存并按需判断内容是否需要重新验证。 如果是页面返回，页面内容不会重新加载，直接从缓存中恢复。\nsetCacheMode允许客户端根据指定的模式来使用缓存:")]),e._v(" "),t("ul",[t("li",[e._v("LOAD_DEFAULT 默认加载方式, 可以根据cache-control指定来获取页面数据")]),e._v(" "),t("li",[e._v("LOAD_CACHE_ELSE_NETWORK 按网络情况使用缓存")]),e._v(" "),t("li",[e._v("LOAD_NO_CACHE 不使用缓存")]),e._v(" "),t("li",[e._v("LOAD_CACHE_ONLY 只使用缓存")])]),e._v(" "),t("h4",{attrs:{id:"setdomstorageenabled-boolean-flag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setdomstorageenabled-boolean-flag","aria-hidden":"true"}},[e._v("#")]),e._v(" setDomStorageEnabled (boolean flag)")]),e._v(" "),t("blockquote",[t("p",[e._v("允许使用DOM存储相关的API")])]),e._v(" "),t("h4",{attrs:{id:"setallowfileaccess-boolean-allow"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setallowfileaccess-boolean-allow","aria-hidden":"true"}},[e._v("#")]),e._v(" setAllowFileAccess (boolean allow)")]),e._v(" "),t("blockquote",[t("p",[e._v("设置Webview是否可以访问系统文件，默认为true；")])]),e._v(" "),t("p",[e._v("如果禁止访问系统文件，则无法加载本地html文件。")]),e._v(" "),t("h4",{attrs:{id:"setallowfileaccessfromfileurls-boolean-flag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setallowfileaccessfromfileurls-boolean-flag","aria-hidden":"true"}},[e._v("#")]),e._v(" setAllowFileAccessFromFileURLs (boolean flag)")]),e._v(" "),t("blockquote",[t("p",[e._v("设置是否允许以 "),t("code",[e._v("file://")]),e._v(" URL的方式加载的Javascript访问本地其他文件内容。")])]),e._v(" "),t("p",[e._v("在Android 4.1 以上版本默认值是false")]),e._v(" "),t("h4",{attrs:{id:"setallowuniversalaccessfromfileurls-boolean-flag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setallowuniversalaccessfromfileurls-boolean-flag","aria-hidden":"true"}},[e._v("#")]),e._v(" setAllowUniversalAccessFromFileURLs (boolean flag)")]),e._v(" "),t("blockquote",[t("p",[e._v("设置是否允许以 "),t("code",[e._v("file://")]),e._v(" URL的方式加载的Javascript访问其他源的数据。")])]),e._v(" "),t("p",[e._v("在Android 4.1 以上版本默认值是false。")]),e._v(" "),t("div",{staticClass:"warning custom-block"},[t("p",[e._v("考虑到Webview的使用安全，默认情况下应将以上两个配置设置为false，避免通过File URL加载的JavaScript来访问本地文件或其他源的数据；")])]),e._v(" "),t("h4",{attrs:{id:"setjavascriptenabled-boolean-flag"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setjavascriptenabled-boolean-flag","aria-hidden":"true"}},[e._v("#")]),e._v(" setJavaScriptEnabled (boolean flag)")]),e._v(" "),t("blockquote",[t("p",[e._v("Webview是否可以执行JavaScript，默认为false")])]),e._v(" "),t("p",[e._v("设置为true可能会潜在XSS攻击的安全隐患，为了降低风险，建议对于非安全协议的url，禁用此选项。")]),e._v(" "),t("h4",{attrs:{id:"setmixedcontentmode-int-mode"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setmixedcontentmode-int-mode","aria-hidden":"true"}},[e._v("#")]),e._v(" setMixedContentMode (int mode)")]),e._v(" "),t("blockquote",[t("p",[e._v("设置当HTTPS源中试图访问HTTP源中资源的处理方式")])]),e._v(" "),t("ul",[t("li",[e._v("MIXED_CONTENT_NEVER_ALLOW 不允许")]),e._v(" "),t("li",[e._v("MIXED_CONTENT_ALWAYS_ALLOW 允许")])]),e._v(" "),t("h4",{attrs:{id:"setsupportmultiplewindows-boolean-support"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setsupportmultiplewindows-boolean-support","aria-hidden":"true"}},[e._v("#")]),e._v(" setSupportMultipleWindows (boolean support)")]),e._v(" "),t("blockquote",[t("p",[e._v("是否支持多窗口模式，如果为true， 则需要实现WebChromeClient的onCreateWindow方法")])]),e._v(" "),t("h4",{attrs:{id:"setsavepassword-boolean-save"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#setsavepassword-boolean-save","aria-hidden":"true"}},[e._v("#")]),e._v(" setSavePassword (boolean save)")]),e._v(" "),t("blockquote",[t("p",[e._v("是否开启密码存储功能，默认为true")])]),e._v(" "),t("p",[e._v('在用户输入密码时，会弹出提示框，询问用户是否保存密码，如果选择"是"，密码会被明文保到\n'),t("code",[e._v("/data/data/com.package.name/databases/webview.db")]),e._v(", 因此建议禁用。")])])}),[],!1,null,null,null);a.default=o.exports}}]);